##############################
#         MPV CONFIG         #
##############################

##############################
#      Graphics Engine       #
##############################
gpu-api=vulkan          # Modern GPU API
vulkan-async-compute=no # Disable async compute
vulkan-swap-mode=fifo   # VSync compatibility

##############################
#     Playback Behavior      #
##############################
save-position-on-quit=no  # Changed from deprecated no-resume-playback
autofit=85%x85%           # Initial window size
hr-seek-framedrop=no      # Precise seeking
border=no                 # Borderless window
cursor-autohide=100       # Hide cursor after 100ms
msg-color=yes             # Colored terminal output
msg-module=yes            # Module prefixes in output

##############################
#         Screenshots        #
##############################
screenshot-template="%x/Screens/Screenshot-%F-T%wH.%wM.%wS.%wT-F%{estimated-frame-number}"
screenshot-format=png
screenshot-png-compression=0       # Lossless PNG
screenshot-tag-colorspace=yes      # Embed color metadata
screenshot-high-bit-depth=yes      # Preserve bit depth

##############################
#     On-Screen Display      #
##############################
osc=no                    # Disable default controls
osd-bar=yes               # Custom progress bar
osd-font="Inter Tight Medium"
osd-font-size=24          # 1080p-optimized size
osd-color="#FFFFFFFF"     # White text (ARGB)
osd-border-color="#FF000000" # Black border (ARGB)
osd-border-size=1
osd-bar-align-y=1         # Bottom-aligned bar
osd-bar-w=50              # 50% screen width
osd-bar-h=2               # 2% screen height

##############################
#      Subtitles Config      #
##############################
# -- Core Settings -- #
sub-auto = fuzzy
sub-ass-override = force
sub-ass-force-style = yes
sub-use-video-data = aspect-ratio
demuxer-mkv-subtitle-preroll = yes
embeddedfonts = yes

# -- ASS Subtitle Handling -- #
blend-subtitles=no
sub-ass-vsfilter-blur-compat=yes
sub-ass-override=force
sub-ass-style-override=yes
sub-ass-scale-with-window=no

# -- Visual Style -- #
sub-font = "NetflixSans-Medium"
sub-font-size = 50
sub-bold = yes
sub-blur = 2.25
sub-color = 1.0/1.0/1.0/1.0

# -- Border & Shadow Settings -- #
sub-border-color = 0.0/0.0/0.0/0.0
sub-border-size = 1
sub-shadow-offset = 0.1
sub-shadow-color = 0.0/0.0/0.0/0.35

# -- Positioning -- #
sub-align-x = center
sub-align-y = bottom
sub-margin-y = 60
sub-scale-with-window = yes
sub-use-margins = yes

# -- Subtitle Search Paths -- #
sub-file-paths = ass,srt,sub,subs,subtitles

##############################
#        Audio Config        #
##############################
volume-max=150                # 150% max volume
audio-pitch-correction=yes    # Speed compensation
audio-stream-silence=yes      # Prevent audio pops
audio-file-auto=fuzzy         # Smart audio matching

# Language Priorities
alang=jpn,jp,eng,en,enUS,en-US,de,ger
slang=idn,id,eng,en,und,de,ger,jp,jap

##############################
#     Video Processing       #
##############################
profile=gpu-hq        # Standard high-quality profile
vo=gpu-next           # Modern video output
hwdec=nvdec-copy      # NVIDIA hardware decoding

# -- Scaling & Processing -- #
scale=ewa_lanczos
cscale=lanczos        # Chroma upscaling
dscale=catmull_rom    # Downscaling
correct-downscaling=yes
sigmoid-upscaling=yes

# -- Shaders -- #
glsl-shader="~~/shaders/FSRCNNX_x2_16-0-4-1.glsl"
glsl-shader-append="~~/shaders/KrigBilateral.glsl"

# -- Debanding -- #
deband=yes
deband-iterations=6
deband-threshold=20
deband-range=15
deband-grain=4

# -- Motion Processing -- #
video-sync=display-resample
interpolation=yes
tscale=oversample
tscale-blur=0.7
tscale-radius=1.05

##############################
#     HDR & Tone Mapping     #
##############################
tone-mapping=bt.2390
hdr-compute-peak=yes
tone-mapping-max-boost=1.5
target-prim=auto
target-trc=auto
gamma-auto=yes
icc-profile-auto=yes

##############################
#    Streaming & Protocols   #
##############################
[protocol.http]
hls-bitrate=max
cache=yes
demuxer-max-bytes=64MiB
demuxer-max-back-bytes=16MiB

[protocol.https]
profile=protocol.http

[protocol.ytdl]
profile=protocol.http
