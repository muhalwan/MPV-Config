##############################################################################
#                            MPV Configuration File                         #
#                        Balanced Quality-Performance Setup                 #
##############################################################################

############################### Core Settings ###############################
profile = high-quality
gpu-api = vulkan
vo = gpu-next
hwdec = nvdec-copy

#------------------------------ Window Behavior -----------------------------
border = no
cursor-autohide = 100
autofit = 85%x85%
hr-seek-framedrop = no
no-resume-playback

#------------------------------ Vulkan Settings -----------------------------
vulkan-async-compute = no
vulkan-swap-mode = fifo

#---------------------------- Terminal Interface ----------------------------
msg-color = yes
msg-module = yes


############################# Video Processing ##############################

#---------------------------- Scaling Algorithms ----------------------------
scale = spline36
cscale = spline36
dscale = mitchell
scale-blur = 0.98
sigmoid-upscaling = yes
correct-downscaling = yes
linear-downscaling = no

#---------------------------- Motion Processing -----------------------------
video-sync = display-resample
interpolation = yes
interpolation-threshold = 0.01
tscale = mitchell
tscale-blur = 0.7
tscale-radius = 1.05
tscale-clamp = 0.0

#----------------------------- Deband Settings ------------------------------
deband = yes
deband-iterations = 4
deband-threshold = 20
deband-range = 15
deband-grain = 4

#------------------------------ Dithering ------------------------------------
dither-depth = auto
dither = error-diffusion

#----------------------------- Shader Chain ----------------------------------
glsl-shaders = "~~/shaders/FSRCNNX_x2_16-0-4-1.glsl"
glsl-shaders-append = "~~/shaders/KrigBilateral.glsl"
glsl-shaders-append = "~~/shaders/adaptive-sharpen.glsl"


############################### HDR Settings ###############################
tone-mapping = bt.2390
hdr-compute-peak = yes
tone-mapping-max-boost = 1.5
target-prim = auto
target-trc = auto
gamma-auto = yes
icc-profile-auto = yes


############################# Audio Configuration ###########################
volume-max = 150
audio-stream-silence = yes
audio-file-auto = fuzzy
audio-pitch-correction = yes
audio-normalize-downmix = yes

#----------------------- Audio Normalization Filter -------------------------
af = lavfi=[loudnorm=I=-16:TP=-1.5:LRA=11]

#--------------------------- Language Priorities ----------------------------
alang = jpn,jp,eng,en,enUS,en-US,de,ger
slang = idn,id,eng,en,und,de,ger,jp,jap


############################# Subtitle Settings #############################

#--------------------------- Core Subtitle Behavior --------------------------
sub-auto = fuzzy
sub-ass-override = force
sub-ass-force-style = yes
sub-use-video-data = aspect-ratio
demuxer-mkv-subtitle-preroll = yes
embeddedfonts = yes

#----------------------------- Visual Styling --------------------------------
sub-font = "NetflixSans-Medium"
sub-font-size = 50
sub-bold = yes
sub-blur = 2.25
sub-color = 1.0/1.0/1.0/1.0

#-------------------------- Border & Shadow Settings -------------------------
sub-border-color = 0.0/0.0/0.0/0.0
sub-border-size = 1
sub-shadow-offset = 0.1
sub-shadow-color = 0.0/0.0/0.0/0.35

#----------------------------- Positioning -----------------------------------
sub-align-x = center
sub-align-y = bottom
sub-margin-y = 60
sub-scale-with-window = yes
sub-use-margins = yes

#-------------------------- Subtitle Search Paths ----------------------------
sub-file-paths = ass,srt,sub,subs,subtitles


############################## Screenshot Settings ###########################
screenshot-template = "%x/Screens/Screenshot-%F-T%wH.%wM.%wS.%wT-F%{estimated-frame-number}"
screenshot-format = png
screenshot-png-compression = 0
screenshot-tag-colorspace = yes
screenshot-high-bit-depth = yes


############################## Streaming Settings ############################
[protocol.http]
hls-bitrate = max
cache = yes
cache-pause = no
demuxer-max-bytes = 256MiB
demuxer-max-back-bytes = 64MiB

[protocol.https]
profile = protocol.http

[protocol.ytdl]
profile = protocol.http
